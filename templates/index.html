<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Support Chatbot</title>
    <script src="https://unpkg.com/htmx.org@1.8.4"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            important: true
        }
    </script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="{{ url_for('static', filename='js/chat.js') }}" defer></script>
</head>

<body class="bg-gray-900 h-screen">
    <div class="h-screen max-w-4xl mx-auto flex flex-col p-4 relative">
        <!-- Theme Toggle Button -->
        <div class="fixed top-6 right-6 z-50">
            <button id="theme-toggle"
                class="rounded-lg p-2.5 text-sm text-gray-400 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-600">
                <!-- Sun icon for dark mode -->
                <svg id="theme-toggle-light-icon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20">
                    <path
                        d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" />
                </svg>
                <!-- Moon icon for light mode -->
                <svg id="theme-toggle-dark-icon" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                </svg>
            </button>
        </div>

        <!-- Chat container with responsive height -->
        <div id="chatBox" class="flex-1 overflow-y-auto mb-4">
            <!-- Chat messages will be dynamically inserted here -->
        </div>

        <!-- Input form -->
        <form id="messageForm" hx-post="/message" hx-target="#chatBox" hx-swap="beforeend"
            hx-indicator="#loading-message" class="flex gap-2">
            <input type="text" id="messageInput" name="message" required placeholder="Type your message here..."
                class="w-full p-3 rounded-lg border border-gray-600 bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
            <button type="submit"
                class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap">
                Send
            </button>
        </form>
    </div>

    <!-- Add theme.js before the closing body tag -->
    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
</body>

</html>